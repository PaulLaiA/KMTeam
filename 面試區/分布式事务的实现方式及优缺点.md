---
界: Distributed
门: Transactions
纲: 
tags: ["#Distributed/#Transactions","BQ"]
aliases:
  - "[[分布式事务的实现方式及优缺点]]"
date: 2021-09-08
---

	  分布式事务用于在分布式系统中保证不同节点之间的数据一致性。

-   XA方案（强一致性）
    
    两阶段提交，准备阶段 —> 提交阶段
    
    存在问题：
    
    -   性能问题：提交阶段处于同步阻塞状态，占用系统资源
    -   可靠性问题：如果协调者存在单点故障，参与者一直处于锁定状态
    -   数据一致性问题：提交阶段发生局部网络问题，一部分事务参与者收到提交信息，另一部分没有收到提交信息，导致数据不一致
-   TCC方案（最终一致性）
    
    Try：对资源进⾏锁定或者预留
    
    Confirm：在各个服务中执⾏实际的操作
    
    Cancel：执行已经执行成功的业务逻辑的回滚操作
    
    相比XA模式，解决了如下缺点：
    
    -   解决了协调者单点问题
        
    -   同步阻塞：引入超时机制，超时后进行补偿，并且不会锁定整个资源，将资源转换为业务逻 辑形式，粒度变小。
        
    -   数据一致性，有了补偿机制之后，由业务活动管理器控制一致性。
        
    
    存在问题：严重依赖于自己写代码来回滚和补偿
    
-   本地消息表
    
-   可靠消息最终一致性方案
    
-   最大努力通知方案