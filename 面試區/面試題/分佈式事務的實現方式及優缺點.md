---
界: Distributed
門: Transactions
綱: 
tags: ["#Distributed","#Transactions","BQ"]
aliases:
  - "[[分佈式事務的實現方式及優缺點]]"
date: 2021-09-08
---

	  分佈式事務用於在分佈式系統中保證不同節點之間的數據一致性。

-   XA方案（強一致性）
    
    兩階段提交，準備階段 —> 提交階段
    
    存在問題：
    
    -   效能問題：提交階段處於同步阻塞狀態，佔用系統資源
    -   可靠性問題：如果協調者存在單點故障，參與者一直處於鎖定狀態
    -   數據一致性問題：提交階段發生區域性網路問題，一部分事務參與者收到提交資訊，另一部分沒有收到提交資訊，導致數據不一致
-   TCC方案（最終一致性）
    
    Try：對資源進⾏鎖定或者預留
    
    Confirm：在各個服務中執⾏實際的操作
    
    Cancel：執行已經執行成功的業務邏輯的回滾操作
    
    相比XA模式，解決了如下缺點：
    
    -   解決了協調者單點問題
        
    -   同步阻塞：引入超時機制，超時後進行補償，並且不會鎖定整個資源，將資源轉換為業務邏 輯形式，粒度變小。
        
    -   數據一致性，有了補償機制之後，由業務活動管理器控制一致性。
        
    
    存在問題：嚴重依賴於自己寫程式碼來回滾和補償
    
-   本地訊息表
    
-   可靠訊息最終一致性方案
    
-   最大努力通知方案