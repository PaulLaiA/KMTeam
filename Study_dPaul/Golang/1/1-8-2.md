---
Date: 2021-10-22
aliases: []
---

# Metadata

**Title** 	  :: Go çš„é”™è¯¯å¤„ç†

**Author** :: #dPaulLai 

**Classification** :: #Go #Basic 

**Status**  :: #ğŸŒ 

**Type** 	:: #Note 

**Topics** :: #Learn 

**Previous** :: [[1-8-1]]

**ParentNode** :: [[1]]

---

# é”™è¯¯å¤„ç†

## Error æºç 

```go
// The error built-in interface type is the conventional interface for  
// å†…ç½®æ¥å£ç±»å‹çš„é”™è¯¯æ˜¯ä¼ ç»Ÿæ¥å£
// representing an error condition, with the nil value representing no error.  
// è¡¨ç¤ºé”™è¯¯æ¡ä»¶ï¼Œå…¶ä¸­nilå€¼è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ã€‚
type error interface {  
 Error() string  
}
```

## Error å¤„ç†æœºåˆ¶

1. æ•è·æ–¹æ³•å†…è¿”å›çš„ `Error` 
2. å¯¹ `Error` è¿›è¡Œ `nil` åˆ¤æ–­
3. å½“  `Error` ä¸ºéç©ºçŠ¶æ€æ—¶å†è¿›è¡Œ `Error` ç±»å‹åˆ¤æ–­
	1. å¦‚æœç¬¦åˆé¢„æœŸçš„ `Error` åˆ™è¿›è¡Œç›¸å¯¹äºçš„å¤„ç†
	2. å¦‚æœä¸ç¬¦åˆé¢„æœŸçš„ `Error` åˆ™è¿›è¡Œ `panic` å¤„ç†


### Error å¤„ç†èŒƒä¾‹


```go
// Fibonacci æ–æ³¢é‚£å¥‘æ•°åˆ—
func Fibonacci() func() int {  
	a, b := 0, 1  
	return func() int {  
		a, b = b, a+b  
		return a  
	}
}

// writeFile å°†æ–æ³¢é‚£å¥‘æ•°åˆ—æ•°ç»„å†™å…¥æ–‡ä»¶ä¸­
// å¯¹ OpenFile çš„ error è¿›è¡Œå¤„ç†
// å¯¹ error å¯¹è¿›è¡Œç±»å‹åˆ¤æ–­,æ˜¯å¦æ˜¯ os.PathError 
// å¦‚æœæ˜¯çš„è¯å°±è¾“å‡º os.PathError çš„ç›¸å¯¹å‚æ•°
// å¦‚æœä¸æ˜¯çš„è¯å°±å°†errorè¿›è¡Œpanicä¸¢å‡º
func writeFile(filename string) {  
 	file, err := os.OpenFile(filename, os.O_EXCL|os.O_CREATE|os.O_WRONLY, 0666)  
 	if err != nil {  
		if pathError, ok := err.(*os.PathError); !ok {  
			panic(err)  
		} else {  
			fmt.Printf("%s, %s, %s\n", pathError.Op, pathError.Path, pathError.Err)  
		}
		return  
 	}  
 	defer file.Close()  
 	writer := bufio.NewWriter(file)  
 	defer writer.Flush()  
 	f := fib.Fibonacci()  
 	for i := 0; i < 20; i++ {  
 		fmt.Fprintln(writer, f())  
 	}
}
```

## å¦‚ä½•ç»§æ‰¿ Error 


